// Generated by CoffeeScript 1.10.0
(function() {
  this.TodoMVC.module('Layout', function(Layout, App, Backbone, Marionette, $, _) {
    Layout.Header = Marionette.ItemView.extend({
      template: '#template-header',
      ui: {
        input: '#new-todo'
      },
      events: {
        'keypress #new-todo': 'onInputKeypress'
      },
      onInputKeypress: function(evt) {
        var ENTER_KEY, todoText;
        ENTER_KEY = 13;
        todoText = this.ui.input.val().trim();
        if (evt.which === ENTER_KEY && todoText) {
          this.collection.create({
            title: todoText
          });
          return this.ui.input.val('');
        }
      }
    });
    return Layout.Footer = Marionette.Layout.extend({
      template: '#template-footer',
      ui: {
        count: '#todo-count strong',
        filters: '#filters a'
      },
      events: {
        'click #clear-completed': 'onClearClick'
      },
      initialize: function() {
        this.listenTo(App.vent, 'todoList:filter', this.updateFilterSelection);
        return this.listenTo(this.collection, 'all', this.updateCount);
      },
      onRender: function() {
        return this.updateCount();
      },
      updateCount: function() {
        var count;
        count = this.collection.getActive().length;
        this.ui.count.html(count);
        if (count === 0) {
          return this.$el.parent().hide();
        } else {
          return this.$el.parent().show();
        }
      },
      updateFilterSelection: function(filter) {
        return this.ui.filters.removeClass('selected').filter("[href='#" + filter + "']").addClass('selected');
      },
      onClearClick: function() {
        var completed;
        completed = this.collection.getCompleted();
        return completed.forEach(function(todo) {
          return todo.destroy();
        });
      }
    });
  });

}).call(this);

//# sourceMappingURL=TodoMVC.Layout.js.map
